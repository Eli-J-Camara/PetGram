<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Roboto&family=Rock+Salt&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    {% include 'nav.html' %}
    <div class="container">
    <div class="first-col" style="float:left; width: 60%;">
      {% for post in feed %}
        <div class="card post" style="width: 109%;">
          <div class="card-header">
            {% if post.profile_pic %}
              <img class="avatar" src="{{post.profile_pic.url}}" alt="avatar" />
            {% else %}
              <img class="avatar" src="{% static 'images/placeholder.png'%}" alt="Profile Picture"/>
            {% endif %}
            <span class="post-header"><a href="/profile/{{post.display_name.id}}">{{post.display_name}}</a></span>
            {% if not request.user in post.user_likes.all %}
            <div class="ellipsis">
            <a href="/edit_post/{{post.id}}"><span class="iconify" data-icon="fa-ellipsis-h" data-inline="false"></span></a>
            </div>
            {% endif %}
          </div>
        

        {% if post.post_file.url|slice:"-4:" == '.mp4' or post.post_file.url|slice:"-4:" == '.mov' %}
          <video
            id="my-video"
            class="video-js card-img-top"
            controls
            preload="auto"
            width="640"
            height="464"
            poster=""
            data-setup="{}"
          >
            <source src="{{post.post_file.url}}" type="video/mp4" />
          </video>
        {% else %}
          <img class="card-img-top" src="{{ post.post_file.url }}" alt="" />
        {% endif %}

        <div class="card-body">
          <div>
            {% if request.user in post.user_likes.all %}
            <button><a href="/like/{{post.id}}/"><i class="fa fa-heart fa-2x text-danger" aria-hidden="true"></i></a></button>
            {% else %}
            <button><a href="/like/{{post.id}}/"><i class="fa fa-heart fa-2x text-secondary" aria-hidden="true"></i></a></button>
            {% endif %}
        </div>
          Likes {{post.likes}}
          <span class="card-title"><a href="/post_detail/{{post.id}}"><i class="fa fa-comment-o fa-2x"></i></a>Comment</span>
          
        </div>

        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <a href="/profile/{{post.display_name.id}}">{{post.display_name}}</a> -
            <span><a href="/post_detail/{{post.id}}">{{post.caption}}</a></span>
            <p>{{post.created_at}}</p>
          </li>
        </ul>
        </div>
      {% endfor %}
      </div>
      <div class="second-col" style="float:right; width: 30%;">
      <div class="card side" style="width: 18rem%;">
      <div class="card-header list">
        Friends List or Most Recent
        {% comment %} {{feed}} {% endcomment %}
      </div>
        {% for person in feed %}
        <ul class="list-group list-group-flush">
          <li class="list-group-item">{{person.display_name}}</li>
        </ul>
        {% endfor %}
      </div>
      </div>
      <script src="https://vjs.zencdn.net/7.11.4/video.min.js"></script>
    </div>
  </body>
</html>
